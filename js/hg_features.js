function HG_Feature(a,b,c,d){this.title=a;this.data=null;this.data_updated=!1;this.data_update_callback=b;this.data_retriever_callback=c;this.update_rate=d;this.created=!1}function HG_FeatureView(a,b){this.data=a;this.content_renderer=b;this.elem=null;this.HG_FEATURE_CLASS="hg_feature";this.HG_FEATURE_HEADER_CLASS="hg_feature_header";this.HG_FEATURE_CONTENT_CLASS="hg_feature_content"}
HG_FeatureView.prototype._createHeader=function(){var a=document.createElement("div");a.setAttribute("class",this.HG_FEATURE_HEADER_CLASS);a.appendChild(document.createTextNode(this.data.title));a.appendChild(document.createElement("hr"));this.elem.appendChild(a)};
HG_FeatureView.prototype.create=function(){this.elem=document.createElement("div");this.elem.setAttribute("class",this.HG_FEATURE_CLASS);this._createHeader();var a=document.createElement("div");a.setAttribute("id","feature_"+this.data.title.toLowerCase().replace(/\s/g,"_").replace(/,/g,""));a.setAttribute("class",this.HG_FEATURE_CONTENT_CLASS);this.elem.appendChild(a);this.created=!0};HG_FeatureView.prototype.render=function(){return this.content_renderer(this.elem.lastChild)};
HG_FeatureView.prototype.refresh=function(){this.elem.lastChild.innerHTML="";this.render()};function HG_FeatureManager(){this.elem=null;this.features=[];this.initial_create=!0;this.HG_FEATURES_CLASS="hg_features"}HG_FeatureManager.prototype._dataRetrieved=function(a){this.features[a].data.data_update_callback();this.renderFeature(a)};
HG_FeatureManager.prototype.renderFeature=function(a){var b=this.features[a];if(b.data.data_updated){if(!b.created){if(this.initial_create)this.elem.innerHTML="",this.initial_create=!1;b.create();this.elem.appendChild(b.elem)}b.render()}else b=b.data.data_retriever_callback,b!=null?HG_FeatureManager_dataLoadingTimer(b(),this,a):this._dataRetrieved(a)};HG_FeatureManager.prototype.addFeature=function(a){if(a==null)return!1;this.features.push(a);this.renderFeature(this.features.length-1);return!0};
HG_FeatureManager.prototype.create=function(a){this.elem=a;this.elem.setAttribute("class",this.HG_FEATURES_CLASS)};function HG_FeatureManager_dataLoadingTimer(a,b,c){eval(a)?b._dataRetrieved(c):setTimeout(function(){HG_FeatureManager_dataLoadingTimer(a,b,c,!1)},5E3)};
