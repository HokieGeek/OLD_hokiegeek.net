var konami_sequence=[38,38,40,40,37,39,37,39,66,65],timeout=5E3;
function konamiAction(d,e){this.doc=d;this.action=e;this.last_konami_char=-1;this.konami_clear_timer=null;this.listener=function(a){if(a=a?a:window.event?window.event:null){var b=a.charChode?a.charCode:a.keyCode?a.keyCode:a.which?a.which:0;switch(b){case 38:case 40:case 37:case 39:case 66:case 65:this.konami_clear_timer!=null&&clearTimeout(this.konami_clear_timer);var c=this.last_konami_char+1;console.log("[",this,"] found: ",b,"\texpecting: ",konami_sequence[c]);if(konami_sequence[c]==b&&b==65)console.log("   DONE! ",
this.action),this.action(),this.last_konami_char=-1;else if(konami_sequence[c]==b)return console.log("   still in sequence"),this.konami_clear_timer=setTimeout(function(){this.last_konami_char=-1},timeout),this.last_konami_char=c,a.cancelBubble=!0,a.returnValue=!1,a.stopPropagation&&(a.stopPropagation(),a.preventDefault()),!1;else console.log("   WRONG"),this.last_konami_char=-1;break;default:this.last_konami_char=-1}}}};
